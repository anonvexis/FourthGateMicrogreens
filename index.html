<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fourth Gate Microgreens</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
<style>
body {
font-family: 'Inter', sans-serif;
background-color: #f9f9f6;
}

.video-background {
position: absolute;
top: 50%;
left: 50%;
min-width: 100%;
min-height: 100%;
width: auto;
height: auto;
transform: translate(-50%, -50%) scale(1.2);
z-index: 1;
pointer-events: none;
}

.glass {
background: rgba(255, 255, 255, 0.15);
backdrop-filter: blur(12px);
-webkit-backdrop-filter: blur(12px);
border: 1px solid rgba(255, 255, 255, 0.2);
}

.modal-overlay {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: rgba(0, 0, 0, 0.6);
backdrop-filter: blur(8px);
z-index: 100;
display: none;
justify-content: center;
align-items: center;
}

/* Updated modal content for the liquid glass effect */
.modal-content {
background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
backdrop-filter: blur(20px);
-webkit-backdrop-filter: blur(20px);
border-radius: 2rem;
border: 1px solid rgba(255, 255, 255, 0.3);
box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
position: relative;
padding: 2.5rem;
max-width: 90%;
width: 500px;
}

.modal-close {
position: absolute;
top: 1rem;
right: 1rem;
font-size: 1.5rem;
font-weight: bold;
cursor: pointer;
color: #ffffff;
text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
}
/* Custom modal for messages instead of alert() */
.message-box {
position: fixed;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
background-color: #fefefe;
padding: 2rem;
border-radius: 1rem;
box-shadow: 0 5px 15px rgba(0,0,0,0.2);
z-index: 101;
display: none;
text-align: center;
}

/* Glowing button effect */
.glowing-button {
box-shadow: 0 0 15px rgba(134, 239, 172, 0.6);
transition: all 0.3s ease-in-out;
}
.glowing-button:hover {
box-shadow: 0 0 25px rgba(134, 239, 172, 0.8), 0 0 40px rgba(134, 239, 172, 0.4);
transform: scale(1.05);
}

.crop-card {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    padding: 0.75rem 1rem;
    border-radius: 1rem;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
}

.crop-card:hover {
    background: rgba(255, 255, 255, 0.2);
}

.crop-card.selected {
    background: rgba(134, 239, 172, 0.2);
    border-color: rgba(134, 239, 172, 0.8);
    box-shadow: 0 0 10px rgba(134, 239, 172, 0.5);
}
.quantity-control {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 1rem;
    padding: 0.5rem;
}
.qty-btn {
    background: rgba(255, 255, 255, 0.1);
    color: white;
    font-weight: bold;
    font-size: 1.25rem;
    width: 2rem;
    height: 2rem;
    border-radius: 50%;
    transition: background-color 0.2s ease;
}
.qty-btn:hover {
    background: rgba(255, 255, 255, 0.2);
}

/* New CSS for preset cards */
.preset-card {
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
    border: 1px solid rgba(255, 255, 255, 0.2);
    padding: 1.5rem;
    border-radius: 1.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
}
.preset-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.15);
}
.preset-card.selected {
    background: rgba(134, 239, 172, 0.2);
    border-color: rgba(134, 239, 172, 0.8);
    box-shadow: 0 0 15px rgba(134, 239, 172, 0.5);
}
.frequency-card {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    padding: 1.5rem;
    border-radius: 1.5rem;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
}
.frequency-card:hover {
    background: rgba(255, 255, 255, 0.2);
}
.frequency-card.selected {
    background: rgba(134, 239, 172, 0.2);
    border-color: rgba(134, 239, 172, 0.8);
    box-shadow: 0 0 15px rgba(134, 239, 172, 0.5);
}
</style>
</head>
<body class="text-stone-900">

<!-- Navigation -->
<header class="absolute w-full z-50 px-6 py-5 flex justify-between items-center">
<a href="#" class="text-2xl font-bold tracking-tight text-white">Fourth Gate</a>
<nav class="hidden md:flex space-x-8 text-white font-medium">
<a href="#how-it-works" class="hover:text-lime-300 transition">How It Works</a>
<a href="#benefits" class="hover:text-lime-300 transition">Our Promise</a>
<a href="#subscription" class="hover:text-lime-300 transition">Plans</a>
</nav>
<button class="md:hidden p-2 rounded-lg bg-white/20 text-white">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
d="M4 6h16M4 12h16m-7 6h7"/>
</svg>
</button>
</header>

<!-- Hero -->
<section class="relative h-screen flex items-center justify-center text-center text-white overflow-hidden">
<!-- Background Video -->
<div class="absolute inset-0">
<iframe id="video-background-player"
src="https://www.youtube.com/embed/Ep2Eyez78rM?autoplay=1&mute=1&controls=0&modestbranding=1&start=20&enablejsapi=1"
frameborder="0"
allow="autoplay; encrypted-media"
allowfullscreen
class="video-background"></iframe>
</div>

<!-- Overlay -->
<div class="absolute inset-0 bg-gradient-to-b from-black/70 via-black/40 to-black/70 z-10"></div>

<!-- Content -->
<div class="relative z-20 max-w-3xl px-6">
<h1 class="text-5xl md:text-6xl font-extrabold leading-tight tracking-tight">
Savor the Power of Green.
</h1>
<p class="mt-6 text-lg md:text-xl text-stone-200">
Nutrient-dense, farm-fresh microgreens delivered right to your door.
</p>
<div class="mt-8 flex justify-center">
<a href="#subscription" id="choose-box-btn"
class="bg-lime-500 text-black font-semibold py-3 px-8 rounded-full shadow-lg hover:bg-lime-400 transition transform hover:scale-105">
Choose Your Box
</a>
</div>
</div>
</section>

<!-- How It Works -->
<section id="how-it-works" class="py-24 bg-gradient-to-b from-[#f9f9f6] to-[#f0efe9]">
<div class="max-w-6xl mx-auto px-6 text-center">
<h2 class="text-4xl font-bold text-lime-800">So Fresh, So Simple.</h2>
<p class="mt-4 text-stone-600">Getting started is as easy as 1-2-3.</p>
<div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-10">
<div class="glass p-10 rounded-3xl shadow-lg hover:scale-105 transition">
<div class="w-14 h-14 mx-auto flex items-center justify-center bg-lime-600 text-white rounded-full mb-5 text-xl font-bold">1</div>
<h3 class="text-xl font-semibold text-lime-700">Select Your Plan</h3>
<p class="mt-3 text-stone-700">Weekly or bi-weekly ‚Äî tailored to your lifestyle.</p>
</div>
<div class="glass p-10 rounded-3xl shadow-lg hover:scale-105 transition">
<div class="w-14 h-14 mx-auto flex items-center justify-center bg-lime-600 text-white rounded-full mb-5 text-xl font-bold">2</div>
<h3 class="text-xl font-semibold text-lime-700">Receive Your Box</h3>
<p class="mt-3 text-stone-700">Harvested and delivered at peak freshness.</p>
</div>
<div class="glass p-10 rounded-3xl shadow-lg hover:scale-105 transition">
<div class="w-14 h-14 mx-auto flex items-center justify-center bg-lime-600 text-white rounded-full mb-5 text-xl font-bold">3</div>
<h3 class="text-xl font-semibold text-lime-700">Enjoy!</h3>
<p class="mt-3 text-stone-700">Add flavor, color, and nutrition to every meal.</p>
</div>
</div>
</div>
</section>

<!-- Our Promise -->
<section id="benefits" class="py-24 bg-white">
<div class="max-w-6xl mx-auto px-6 text-center">
<h2 class="text-4xl font-bold text-lime-800">Our Promise to You</h2>
<p class="mt-4 text-stone-600">The freshest, most nutritious greens grown sustainably.</p>
<div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-10">
<div class="glass p-10 rounded-3xl shadow-lg hover:scale-105 transition">
<h3 class="text-xl font-semibold text-lime-700">üå± Packed with Nutrients</h3>
<p class="mt-3 text-stone-700">Harvested at their peak for maximum vitamins & minerals.</p>
</div>
<div class="glass p-10 rounded-3xl shadow-lg hover:scale-105 transition">
<h3 class="text-xl font-semibold text-lime-700">üåç Sustainably Grown</h3>
<p class="mt-3 text-stone-700">Organic, earth-friendly methods for a healthier planet.</p>
</div>
<div class="glass p-10 rounded-3xl shadow-lg hover:scale-105 transition">
<h3 class="text-xl font-semibold text-lime-700">‚ö° Freshness Guaranteed</h3>
<p class="mt-3 text-stone-700">Delivered within hours of harvest, guaranteed.</p>
</div>
</div>
</div>
</section>

<!-- Subscription -->
<section id="subscription" class="py-24 bg-gradient-to-r from-lime-600 to-lime-500 text-white text-center">
<div class="max-w-4xl mx-auto px-6">
<h2 class="text-4xl font-bold">Ready to Start Your Journey?</h2>
<p class="mt-4 text-lg text-lime-100">Choose your subscription plan and experience greens like never before.</p>
<div class="mt-10 flex justify-center">
<button id="view-plans-btn" class="bg-white text-lime-700 font-semibold py-3 px-10 rounded-full shadow-xl hover:bg-lime-50 transition transform hover:scale-105">
View Our Plans
</button>
</div>
</div>
</section>

<!-- Footer -->
<footer class="bg-stone-900 text-stone-400 py-10 text-center">
<p>&copy; 2024 Fourth Gate Microgreens. All rights reserved.</p>
</footer>

<!-- Subscription Modal -->
<div id="subscription-modal" class="modal-overlay">
<div class="modal-content text-white">
<span class="modal-close" onclick="closeModal()">&times;</span>
<!-- Step 1: Choose Custom or Preset -->
<div id="step-1" class="step-content">
<h3 class="text-2xl font-bold text-center mb-6">Choose Your Box</h3>
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <button class="w-full bg-lime-400 text-black font-semibold py-6 rounded-full glowing-button" onclick="goToPresets()">
        Choose a Preset
    </button>
    <button class="w-full bg-white/10 text-white font-semibold py-6 rounded-full border border-white/20 hover:bg-white/20 transition-colors" onclick="goToCustom()">
        Build Your Own
    </button>
</div>
</div>

<!-- Step 2: Choose Preset -->
<div id="step-2" class="step-content hidden">
    <h3 class="text-2xl font-bold text-center mb-6">Select a Preset</h3>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="preset-card" data-preset="Zesty Boost" data-price="18" data-crops="Broccoli, Radish">
            <h4 class="font-bold text-xl">The Zesty Boost</h4>
            <p class="text-sm mt-1 text-lime-200">Broccoli & Radish</p>
            <p class="mt-2 text-lg font-semibold">$18</p>
        </div>
        <div class="preset-card" data-preset="Wellness Blend" data-price="18" data-crops="Kale, Broccoli">
            <h4 class="font-bold text-xl">The Wellness Blend</h4>
            <p class="text-sm mt-1 text-lime-200">Kale & Broccoli</p>
            <p class="mt-2 text-lg font-semibold">$18</p>
        </div>
        <div class="preset-card" data-preset="Garden Party" data-price="18" data-crops="Sunflower, Pea">
            <h4 class="font-bold text-xl">The Garden Party</h4>
            <p class="text-sm mt-1 text-lime-200">Sunflower & Pea</p>
            <p class="mt-2 text-lg font-semibold">$18</p>
        </div>
    </div>
    <div class="mt-6 text-center">
        <button class="w-full bg-lime-400 text-black font-semibold py-3 rounded-full glowing-button" onclick="goToSubscriptionFrequency()">
            Proceed
        </button>
    </div>
    <button class="mt-6 text-white/70 hover:text-white transition" onclick="prevStep()">‚Üê Back</button>
</div>

<!-- Step 2a: Choose Subscription Frequency (New Step) -->
<div id="step-2a" class="step-content hidden">
    <h3 class="text-2xl font-bold text-center mb-6">Choose Frequency</h3>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="frequency-card" data-frequency="Weekly" data-price-modifier="1">
            <h4 class="font-bold text-xl">Weekly</h4>
            <p class="text-sm mt-1 text-white/70">Best for daily use</p>
        </div>
        <div class="frequency-card" data-frequency="Bi-weekly" data-price-modifier="0.95">
            <h4 class="font-bold text-xl">Bi-weekly</h4>
            <p class="text-sm mt-1 text-white/70">Save 5%</p>
        </div>
        <div class="frequency-card" data-frequency="Monthly" data-price-modifier="0.9">
            <h4 class="font-bold text-xl">Monthly</h4>
            <p class="text-sm mt-1 text-white/70">Save 10%</p>
        </div>
    </div>
    <div class="mt-6 text-2xl font-bold text-center text-white">
        Total: $<span id="frequency-total-price">0.00</span>
    </div>
    <div class="mt-6 text-center">
        <button class="w-full bg-lime-400 text-black font-semibold py-3 rounded-full glowing-button" onclick="goToDetailsFromFrequency()">
            Proceed to Details
        </button>
    </div>
    <button class="mt-6 text-white/70 hover:text-white transition" onclick="prevStep()">‚Üê Back</button>
</div>

<!-- Step 3: Build Your Custom Box -->
<div id="step-3" class="step-content hidden">
<h3 class="text-2xl font-bold text-center mb-6">Build Your Box</h3>
<!-- Crop 1 Selection -->
<div class="mb-6">
<p class="font-semibold text-lg mb-2">Crop 1</p>
<div id="crop1-options" class="flex flex-wrap gap-2 justify-center">
    <div class="crop-card" data-crop="Broccoli">Broccoli</div>
    <div class="crop-card" data-crop="Kale">Kale</div>
    <div class="crop-card" data-crop="Radish">Radish</div>
    <div class="crop-card" data-crop="Sunflower">Sunflower</div>
    <div class="crop-card" data-crop="Pea">Pea</div>
</div>
<div class="mt-4 flex gap-4 items-center">
    <span class="text-white/70">3.5 oz</span>
    <div id="crop1-qty-control" class="flex items-center gap-2">
        <button class="qty-btn" data-action="decrease">-</button>
        <span id="crop1-qty-display" class="font-bold text-lg">1</span>
        <button class="qty-btn" data-action="increase">+</button>
    </div>
</div>
</div>

<!-- Crop 2 Selection -->
<div class="mb-6">
<p class="font-semibold text-lg mb-2">Crop 2</p>
<div id="crop2-options" class="flex flex-wrap gap-2 justify-center">
    <div class="crop-card" data-crop="Broccoli">Broccoli</div>
    <div class="crop-card" data-crop="Kale">Kale</div>
    <div class="crop-card" data-crop="Radish">Radish</div>
    <div class="crop-card" data-crop="Sunflower">Sunflower</div>
    <div class="crop-card" data-crop="Pea">Pea</div>
</div>
<div class="mt-4 flex gap-4 items-center">
    <span class="text-white/70">3.5 oz</span>
    <div id="crop2-qty-control" class="flex items-center gap-2">
        <button class="qty-btn" data-action="decrease">-</button>
        <span id="crop2-qty-display" class="font-bold text-lg">1</span>
        <button class="qty-btn" data-action="increase">+</button>
    </div>
</div>
</div>

<!-- Crop 3 Selection -->
<div class="mb-6">
<p class="font-semibold text-lg mb-2">Crop 3</p>
<div id="crop3-options" class="flex flex-wrap gap-2 justify-center">
    <div class="crop-card" data-crop="Broccoli">Broccoli</div>
    <div class="crop-card" data-crop="Kale">Kale</div>
    <div class="crop-card" data-crop="Radish">Radish</div>
    <div class="crop-card" data-crop="Sunflower">Sunflower</div>
    <div class="crop-card" data-crop="Pea">Pea</div>
</div>
<div class="mt-4 flex gap-4 items-center">
    <span class="text-white/70">3.5 oz</span>
    <div id="crop3-qty-control" class="flex items-center gap-2">
        <button class="qty-btn" data-action="decrease">-</button>
        <span id="crop3-qty-display" class="font-bold text-lg">1</span>
        <button class="qty-btn" data-action="increase">+</button>
    </div>
</div>
</div>

<div class="mt-6 text-2xl font-bold text-center text-white">
Total: $<span id="total-price">0.00</span>
</div>
<button class="w-full bg-lime-400 text-black font-semibold py-3 rounded-full mt-6 glowing-button" onclick="nextStep()">
Proceed to Details
</button>
<button class="mt-6 text-white/70 hover:text-white transition" onclick="prevStep()">‚Üê Back</button>
</div>
<!-- Step 4: Enter Details -->
<div id="step-4" class="step-content hidden">
<h3 class="text-2xl font-bold text-center mb-6 text-white">Enter Your Details</h3>
<form id="details-form">
<input type="text" placeholder="Full Name" class="w-full p-3 mb-4 rounded-lg border-2 border-white/30 bg-white/10 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-lime-300" required>
<input type="email" placeholder="Email Address" class="w-full p-3 mb-4 rounded-lg border-2 border-white/30 bg-white/10 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-lime-300" required>
<input type="text" placeholder="Shipping Address" class="w-full p-3 mb-4 rounded-lg border-2 border-white/30 bg-white/10 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-lime-300" required>
<button type="submit" class="w-full bg-lime-400 text-black font-semibold py-3 rounded-full glowing-button">
Complete Order
</button>
</form>
<button class="mt-6 text-white/70 hover:text-white transition" onclick="prevStep()">‚Üê Back</button>
</div>
</div>
</div>
<!-- Message Box -->
<div id="message-box" class="message-box">
<p id="message-text" class="text-lg font-semibold text-stone-800"></p>
<button class="mt-4 bg-lime-600 text-white font-semibold py-2 px-6 rounded-full" onclick="closeMessageBox()">OK</button>
</div>

<!-- YouTube IFrame Player API -->
<script>
var player;
var checkInterval;

// This function is automatically called by the YouTube API
function onYouTubeIframeAPIReady() {
player = new YT.Player('video-background-player', {
events: {
'onReady': onPlayerReady,
'onStateChange': onPlayerStateChange
}
});
}

function onPlayerReady(event) {
// Optional: Start playing when the player is ready
event.target.playVideo();
}

function onPlayerStateChange(event) {
// Stop the check interval if the video is paused or ended
if (event.data === YT.PlayerState.PAUSED || event.data === YT.PlayerState.ENDED) {
clearInterval(checkInterval);
}
// Start the check interval only when the video is playing
if (event.data === YT.PlayerState.PLAYING) {
// Get video duration to calculate the loop point
var duration = player.getDuration();
var loopStart = 20; // 20 seconds
var loopEnd = duration - 10; // 10 seconds before the end
checkInterval = setInterval(function() {
var currentTime = player.getCurrentTime();
// If the current time is past the loop end point, seek back to the start
if (currentTime >= loopEnd) {
player.seekTo(loopStart);
}
}, 500); // Check every half second for better responsiveness
}
}

// --- Modal & Pricing Logic ---
const modal = document.getElementById('subscription-modal');
const chooseBoxBtn = document.getElementById('choose-box-btn');
const viewPlansBtn = document.getElementById('view-plans-btn');
const detailsForm = document.getElementById('details-form');
const messageBox = document.getElementById('message-box');
const messageText = document.getElementById('message-text');
const totalPriceEl = document.getElementById('total-price');

let currentStep = 1;
const pricePerUnit = 6; // Updated to $6 for a 3.5oz unit
let isCustomOrder = true;
let selectedPreset = null;
let selectedFrequency = null;

function showMessageBox(message) {
messageText.textContent = message;
messageBox.style.display = 'block';
}

function closeMessageBox() {
messageBox.style.display = 'none';
}

function openModal() {
modal.style.display = 'flex';
currentStep = 1;
showStep(currentStep);
updatePrice();
}

function closeModal() {
modal.style.display = 'none';
}

function showStep(step) {
const steps = document.querySelectorAll('.step-content');
steps.forEach(s => s.classList.add('hidden'));
document.getElementById('step-' + step).classList.remove('hidden');
}

function goToPresets() {
    showStep(2);
}

function goToCustom() {
    isCustomOrder = true;
    showStep(3);
    updatePrice();
}

function nextStep() {
    // This function is now only used for custom box flow
    const crop1Selected = document.querySelector('#crop1-options .selected');
    const crop2Selected = document.querySelector('#crop2-options .selected');
    const crop3Selected = document.querySelector('#crop3-options .selected');

    if (!crop1Selected && !crop2Selected && !crop3Selected) {
        showMessageBox('Please select at least one crop to proceed.');
        return;
    }
    
    showStep(4);
}

function goToSubscriptionFrequency() {
    const presetSelected = document.querySelector('#step-2 .preset-card.selected');
    if (!presetSelected) {
        showMessageBox('Please select a preset to continue.');
        return;
    }
    isCustomOrder = false;
    selectedPreset = {
        name: presetSelected.dataset.preset,
        price: parseFloat(presetSelected.dataset.price),
        crops: presetSelected.dataset.crops
    };
    updatePrice();
    showStep(2.5); // Using 2.5 to represent the new step
}

function goToDetailsFromFrequency() {
    const frequencySelected = document.querySelector('#step-2a .frequency-card.selected');
    if (!frequencySelected) {
        showMessageBox('Please select a subscription frequency.');
        return;
    }
    selectedFrequency = frequencySelected.dataset.frequency;
    showStep(4);
}

function prevStep() {
    if (currentStep === 4) {
        if (isCustomOrder) {
            showStep(3);
        } else {
            showStep(2);
        }
    } else if (currentStep === 2.5) {
        showStep(2);
    } else if (currentStep === 3 || currentStep === 2) {
        showStep(1);
    }
}


function updatePrice() {
    let total = 0;
    let priceElementId = 'total-price';

    if (isCustomOrder) {
        const crop1Selected = document.querySelector('#crop1-options .selected');
        const crop2Selected = document.querySelector('#crop2-options .selected');
        const crop3Selected = document.querySelector('#crop3-options .selected');

        const crop1Qty = parseInt(document.getElementById('crop1-qty-display').textContent) || 0;
        const crop2Qty = parseInt(document.getElementById('crop2-qty-display').textContent) || 0;
        const crop3Qty = parseInt(document.getElementById('crop3-qty-display').textContent) || 0;

        if (crop1Selected) total += crop1Qty * pricePerUnit;
        if (crop2Selected) total += crop2Qty * pricePerUnit;
        if (crop3Selected) total += crop3Qty * pricePerUnit;
    } else {
        if (selectedPreset) {
            total = selectedPreset.price;
            priceElementId = 'frequency-total-price';
        }
    }

    // Apply frequency modifier if on the frequency selection step
    const frequencySelected = document.querySelector('#step-2a .frequency-card.selected');
    if (frequencySelected) {
        const modifier = parseFloat(frequencySelected.dataset.priceModifier);
        total *= modifier;
    }

    document.getElementById(priceElementId).textContent = total.toFixed(2);
}

const cropOptionsContainers = [
    document.getElementById('crop1-options'),
    document.getElementById('crop2-options'),
    document.getElementById('crop3-options'),
];

cropOptionsContainers.forEach(container => {
    container.addEventListener('click', (e) => {
        if (e.target.classList.contains('crop-card')) {
            // Deselect all other cards in this container
            container.querySelectorAll('.crop-card').forEach(card => card.classList.remove('selected'));
            // Select the clicked card
            e.target.classList.add('selected');
            updatePrice();
        }
    });
});

const presetOptions = document.querySelectorAll('.preset-card');
presetOptions.forEach(card => {
    card.addEventListener('click', (e) => {
        // Deselect all other preset cards
        presetOptions.forEach(c => c.classList.remove('selected'));
        // Select the clicked card
        e.currentTarget.classList.add('selected');
        selectedPreset = e.currentTarget.dataset;
        // Don't update the price here, as it will be updated in the next step
    });
});

const frequencyOptions = document.querySelectorAll('.frequency-card');
frequencyOptions.forEach(card => {
    card.addEventListener('click', (e) => {
        frequencyOptions.forEach(c => c.classList.remove('selected'));
        e.currentTarget.classList.add('selected');
        updatePrice();
    });
});

function handleQtyChange(e) {
    const parentContainer = e.target.closest('.mb-6');
    const displayId = parentContainer.querySelector('[id$="-qty-display"]').id;
    const currentQtyEl = document.getElementById(displayId);
    let currentQty = parseInt(currentQtyEl.textContent);
    const action = e.target.dataset.action;

    if (action === 'increase') {
        currentQty++;
    } else if (action === 'decrease' && currentQty > 1) {
        currentQty--;
    }
    currentQtyEl.textContent = currentQty;
    updatePrice();
}

document.getElementById('crop1-qty-control').addEventListener('click', handleQtyChange);
document.getElementById('crop2-qty-control').addEventListener('click', handleQtyChange);
document.getElementById('crop3-qty-control').addEventListener('click', handleQtyChange);


detailsForm.addEventListener('submit', function(event) {
event.preventDefault();
// Show a success message instead of a redirect
showMessageBox('Thank you for your order! We\'ll send a confirmation to your email shortly.');
closeModal();
// In a real application, you would handle form submission here
// and then redirect to a payment processor.
console.log('Form submitted.');
});

chooseBoxBtn.addEventListener('click', function(e) {
    e.preventDefault();
    openModal();
});
viewPlansBtn.addEventListener('click', function(e) {
    e.preventDefault();
    openModal();
});
</script>
<script src="https://www.youtube.com/iframe_api"></script>

</body>
</html>





